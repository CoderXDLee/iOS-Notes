# 1.5 - åŒæ—¶ä½¿ç”¨ UIKit å’Œ SwiftUI

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²å‡†å¤‡å¥½åˆ›å»º map view äº†ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨ `MapKit` ä¸­çš„ `MKMapView` ç±»æ¥æ¸²æŸ“åœ°å›¾ã€‚

![map view](../../../.gitbook/assets/snip20190627_31.png)

ä¸ºäº†åœ¨ `SwiftUI` ä¸­ä½¿ç”¨ `UIView` çš„å­ç±»ï¼Œéœ€è¦å°†å…¶å®ƒ **view** åŒ…è£…åœ¨éµå¾ª `UIViewRepresentable` åè®®çš„ `SwiftUI view` ä¸­ã€‚`SwiftUI` åŒ…å«äº†å’Œ `WatchKit`ï¼Œ`AppKit` view ç±»ä¼¼çš„åè®®ã€‚  
é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯ä»¥å‘ˆç° `MKMapView` çš„è‡ªå®šä¹‰ viewã€‚

#### ç¬¬ 1 æ­¥:

é€‰æ‹© `File` &gt; `New` &gt; `File` ï¼Œé€‰æ‹© `iOS` å¹³å°ï¼Œé€‰æ‹© `SwiftUI View` æ¨¡æ¿ï¼Œç„¶åå•å‡» `Next` ã€‚å°†æ–°æ–‡ä»¶å‘½åä¸º `MapView.swift` ï¼Œç„¶åå•å‡» `Create` ã€‚

![&#x7B2C; 1 &#x6B65;](../../../.gitbook/assets/snip20190627_32.png)

#### ç¬¬ 2 æ­¥:

åœ¨ `MapView.swift` ä¸­ `import MapKit`ï¼Œå¹¶å£°æ˜ `MapView` ç±»å‹éµå¾ª `UIViewRepresentable` ã€‚

> MapView.swift

```swift
import SwiftUI
import MapKit

struct MapView : UIViewRepresentable {
    var body: some View {
        Text(/*@START_MENU_TOKEN@*/"Hello World!"/*@END_MENU_TOKEN@*/)
    }
}

#if DEBUG
struct MapView_Previews : PreviewProvider {
    static var previews: some View {
        MapView()
    }
}
#endif
```

è¿™ä¸ªæ—¶å€™ï¼Œä»£ç æŠ¥é”™ï¼Œå¯ä»¥å¿½ç•¥ Xcode çš„é”™è¯¯ï¼Œæ¥ä¸‹æ¥çš„å‡ æ­¥ä¼šè§£å†³è¿™äº›é—®é¢˜ã€‚

![Xcode &#x62A5;&#x9519;](../../../.gitbook/assets/snip20190627_34.png)

`UIViewRepresentable` åè®®éœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼š   
ğŸ‘‰ `makeUIView(context:)` ç”¨æ¥åˆ›å»ºä¸€ä¸ª `MKMapView`ï¼Œ   
ğŸ‘‰ `updateUIView(_:context:)` ç”¨æ¥é…ç½® view å¹¶å“åº”ä¿®æ”¹ã€‚

#### ç¬¬ 3 æ­¥: 

ç”¨ `makeUIView(context:)` æ–¹æ³•æ›¿æ¢ `body` å±æ€§ï¼Œè¯¥æ–¹æ³•åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªç©ºçš„ `MKMapView`ã€‚

> MapView.swift

```swift
import SwiftUI
import MapKit

struct MapView : UIViewRepresentable {
    
    typealias UIViewType = MKMapView
    
    func makeUIView(context: UIViewRepresentableContext<MapView>) -> MKMapView {
        return MKMapView(frame: .zero)
    }
}

#if DEBUG
struct MapView_Previews : PreviewProvider {
    static var previews: some View {
        MapView()
    }
}
#endif
```

#### ç¬¬ 4 æ­¥:

å®ç° `updateUIView(_:context:)` æ–¹æ³•ï¼Œç»™ map view è®¾ç½®åæ ‡ï¼Œä½¿å…¶åœ¨ `Turtle Rock` ä¸Šå±…ä¸­ã€‚

> MapView.swift

```swift
import SwiftUI
import MapKit

struct MapView : UIViewRepresentable {
    
    typealias UIViewType = MKMapView
    
    func makeUIView(context: UIViewRepresentableContext<MapView>) -> MKMapView {
        return MKMapView(frame: .zero)
    }
    
    func updateUIView(_ uiView: MKMapView, context: UIViewRepresentableContext<MapView>) {
        let coordinate = CLLocationCoordinate2D(
            latitude: 34.011286, longitude: -116.166868)
        let span = MKCoordinateSpan(latitudeDelta: 2.0, longitudeDelta: 2.0)
        let region = MKCoordinateRegion(center: coordinate, span: span)
        uiView.setRegion(region, animated: true)
    }
}

#if DEBUG
struct MapView_Previews : PreviewProvider {
    static var previews: some View {
        MapView()
    }
}
#endif
```

å½“é¢„è§ˆå¤„äº `static mode` æ—¶ä»…æ˜¾ç¤º `SwiftUI` view ã€‚å› ä¸º `MKMapView` æ˜¯ä¸€ä¸ª `UIView` çš„å­ç±»ï¼Œæ‰€ä»¥éœ€è¦åˆ‡æ¢åˆ°å®æ—¶æ¨¡å¼æ‰èƒ½çœ‹åˆ°åœ°å›¾ã€‚

#### ç¬¬ 5 æ­¥:

å•å‡» `Live Preview` å¯å°†é¢„è§ˆåˆ‡æ¢ä¸ºå®æ—¶æ¨¡å¼ï¼Œæœ‰æ—¶ä¹Ÿä¼šç”¨åˆ° `Try Again` æˆ– `Resume` æŒ‰é’®ã€‚  
ç‰‡åˆ»ä¹‹åï¼Œä½ ä¼šçœ‹åˆ° `Joshua Tree National Park` çš„åœ°å›¾ï¼Œè¿™æ˜¯ `Turtle Rock` çš„æ•…ä¹¡ã€‚

![&#x7B2C; 5 &#x6B65;](../../../.gitbook/assets/snip20190627_35.png)





